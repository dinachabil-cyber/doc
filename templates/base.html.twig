<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>
			{% block title %}DocManager
			{% endblock %}
		</title>
		<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>ðŸ“„</text></svg>">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="{{ asset('css/premium-dashboard.css') }}"> {% block stylesheets %}{% endblock %}
		{% block javascripts %}
			{% block importmap %}
				{{ importmap('app') }}
			{% endblock %}
		{% endblock %}
	</head>
	<body>
		{# Animated Background #}
		<div class="bg-animation">
			<div class="bg-grid"></div>
			<div class="glow-orb glow-orb-1"></div>
			<div class="glow-orb glow-orb-2"></div>
			<div class="glow-orb glow-orb-3"></div>
		</div>
		<div class="glass-overlay"></div>

		{% if app.user %}
			{# Dashboard Layout with Sidebar #}
			<div
				class="app-layout">
				{# Sidebar #}
				<aside class="sidebar" id="sidebar">
					<div class="sidebar-header">
						<div class="sidebar-logo">
							<span class="sidebar-logo-icon">ðŸ“„</span>
							DocManager
						</div>
					</div>

					<nav class="sidebar-nav">
						<div class="sidebar-section">
							<div class="sidebar-section-title">Main</div>
							<a href="{{ path('app_client_index') }}" class="sidebar-link {% if app.request.attributes.get('_route') starts with 'app_client' %}active{% endif %}">
								<span class="sidebar-link-icon">ðŸ‘¥</span>
								Clients
							</a>
							<a href="{{ path('app_document_list', {id: 1}) }}" class="sidebar-link {% if app.request.attributes.get('_route') starts with 'app_document' %}active{% endif %}">
								<span class="sidebar-link-icon">ðŸ“„</span>
								Documents
							</a>
						</div>

						<div class="sidebar-section">
							<div class="sidebar-section-title">Quick Actions</div>
							<a href="{{ path('app_client_new') }}" class="sidebar-link">
								<span class="sidebar-link-icon">âž•</span>
								New Client
							</a>
						</div>
					</nav>

					<div class="sidebar-user">
						<div class="sidebar-user-avatar">
							{{ app.user.userIdentifier|slice(0, 2)|upper }}
						</div>
						<div class="sidebar-user-info">
							<div class="sidebar-user-name">{{ app.user.userIdentifier }}</div>
							<div class="sidebar-user-email">Account</div>
						</div>
						<a href="{{ path('app_logout') }}" class="btn btn-sm btn-secondary" title="Logout">ðŸšª</a>
					</div>
				</aside>

				{# Main Content #}
				<main class="main-content">
					<div
						class="page-content">
						{# Flash Messages #}
						{% for label, messages in app.flashes %}
							{% for message in messages %}
								<div class="flash flash-{{ label }}">âœ“
									{{ message }}</div>
							{% endfor %}
						{% endfor %}

						{% block body %}{% endblock %}
					</div>
				</main>
			</div>

			{# Mobile Toggle Button #}
			<button class="sidebar-toggle" onclick="document.getElementById('sidebar').classList.toggle('open')">â˜°</button>

		{% else %}
			{# Auth Layout (Login/Register) #}
			{% block wrapper %}
				<div class="auth-wrapper">
					{% for label, messages in app.flashes %}
						{% for message in messages %}
							<div class="flash flash-{{ label }}">âœ“
								{{ message }}</div>
						{% endfor %}
					{% endfor %}

					{% block auth_body %}{% endblock %}
				</div>
			{% endblock %}
		{% endif %}
	</body>
</html>
