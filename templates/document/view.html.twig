<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>{{ document.title }} - View - DocManager</title>

		<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>ğŸ“„</text></svg>">
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="{{ asset('css/premium-dashboard.css') }}">
	</head>
	<body>
		<div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 1000;">
			{# Back button #}
			<div style="position: absolute; top: 20px; left: 20px; z-index: 1001;">
				<a href="{{ path('app_document_show', {id: document.id}) }}" class="btn btn-light">â† Back to Details</a>
			</div>
			
			{# Document title #}
			<div style="position: absolute; top: 20px; left: 50%; transform: translateX(-50%); z-index: 1001; color: white; font-size: 1.2rem; font-weight: bold;">
				{{ document.title }}
			</div>
			
			{# View content #}
			<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; padding: 80px 20px 20px;">
				{% set isImage = document.mimeType starts with 'image/' %}
				{% set isPdf = document.mimeType == 'application/pdf' %}
				
				{% if isImage %}
					<img src="{{ path('app_document_serve', {id: document.id}) }}" alt="{{ document.title }}" style="max-width: 100%; max-height: 100%; object-fit: contain;">
			{% elseif isPdf %}
				<iframe src="{{ path('app_document_serve', {id: document.id}) }}" width="100%" height="100%" style="border: none;"></iframe>
			{% elseif document.mimeType starts with 'text/' %}
				<div style="width: 100%; height: 100%; background: #fff; color: #000; padding: 2rem; overflow: auto;">
					<pre style="margin: 0; font-family: monospace; font-size: 14px; white-space: pre-wrap; word-wrap: break-word;">{{ fileContent ?? 'No content' }}</pre>
				</div>
				{% else %}
					<div style="text-align: center; color: white;">
						<div style="font-size: 6rem; margin-bottom: 1rem;">ğŸ“„</div>
						<p>{{ document.originalName ?? document.fileName }}</p>
						<p style="font-size: 0.9rem; opacity: 0.8;">{{ document.mimeType }}</p>
						<p style="font-size: 0.9rem; opacity: 0.8;">{{ document.size ? (document.size / 1024)|number_format(1) ~ ' KB' : '' }}</p>
						<p style="margin-top: 2rem; opacity: 0.6;">This file type cannot be displayed inline</p>
					</div>
				{% endif %}
			</div>
		</div>
	</body>
</html>
